{% extends "layouts/base.html" %}
{% block page_content %}
<div class="section-page-container">
  <h1>{{ batch.course }} {{ batch.number }}</h1>
  <h2>Start Date: {{ batch.start_date }}</h2>
  <div class="section-container">
    {% for section in sections %}
    <div class="section">
      <h3>Section: {{ section.number }}</h3>
      <table class="table table-striped">
        <thead>
          <tr>
            <th class="first-column" scope="col">Email</th>
            <th scope="col">User ID</th>
            <th scope="col">Hubspot ID</th>
            <th scope="col">Switch</th>
            <th scope="col">Delete</th>
          </tr>
        </thead>
        <tbody>
          {% for user in section.users %}
          <tr>
            <th class="first-column" scope="row">{{ user.email }}</th>
            <td>{{ user.id }}</td>
            <td>{{ user.hubspot_id }}</td>
            <td>
              <form method="POST">
                {% csrf_token %}
                <select name="batch_sections" class="section-select">
                  <option selected="selected" disabled>--</option>
                  {% for section in sections %}
                  <option value="{{ section.number }}">{{ section.number }}</option>
                  {% endfor %}
                </select>
                  <input type="hidden" name="batch_sections" value="{{ user.id }}">
                <button class="btn btn-primary" type="submit" value="Submit"><i class="fas fa-sync-alt"></i></button>
              </form>
            </td>
            <td>
              <form method="POST">
                {% csrf_token %}
                  <input type="hidden" name="delete_items" value="{{ section.number }}">
                  <input type="hidden" name="delete_items" value="{{ user.id }}">
                <button class="btn btn-primary" type="submit"><i class="fas fa-trash-alt"></i></button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% endfor %}
    {% endblock %}
